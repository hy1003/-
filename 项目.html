<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>项目</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/index.css">
</head>

<body style="height: 2000px">
    <!--包裹容器-->
    <div class="wrap">
        <!--窗口侧边栏    toolBarWrap    toolBarOut-->
        <div class="toolBar toolBarWrap">
            <!--侧边栏内容-->
            <div class="content"></div>
            <div class="but list"></div>
            <!--中间的列表-->
            <ul class="toolList">
                <li class="pull">
                    <i class="tabIcon vip"></i>
                    <em>尚品会员</em>
                </li>
                <li class="pull">
                    <i class="tabIcon cart"></i>
                    <em>购物车</em>
                </li>
                <li class="pull">
                    <i class="tabIcon follow"></i>
                    <em>我的关注</em>
                </li>
                <li class="pull">
                    <i class="tabIcon history"></i>
                    <em>我的足迹</em>
                </li>
                <li class="pull">
                    <i class="tabIcon message"></i>
                    <em>我的消息</em>
                </li>
                <li class="pull">
                    <i class="tabIcon qus"></i>
                    <em>咨询</em>
                </li>
            </ul>
            <!--回到顶部-->
            <div class="back pull">
                <i class="tabIcon top"></i>
                <em>顶部</em>
            </div>
        </div>
        <!--头部-->
        <header class="header">
            <!--头部导航区域-->
            <div class="top">
                <!--版心-->
                <div class="container">
                    <div class="loginList">
                        <p>尚品汇欢迎您！</p>
                        <p>
                            <span>请</span>
                            <a href="###">登录 </a>
                            <a href="###" class="register">免费注册</a>
                        </p>
                    </div>
                    <!--导航如果是静态 可以直接使用a标签  如果导航有动态效果  就需要嵌套ul-->
                    <div class="typeList">
                        <a href="###">我的订单</a>
                        <a href="###">我的购物车</a>
                        <a href="###">我的尚品汇</a>
                        <a href="###">尚品汇会员</a>
                        <a href="###">企业采购</a>
                        <a href="###">关注尚品汇</a>
                        <a href="###">合作招商</a>
                        <a href="###">商家后台</a>
                    </div>

                </div>
            </div>
            <!--搜索框区域-->
            <div class="bottom">
                <h1 class="logoArea">
                    <a href="###" title="尚品汇">
                        <img src="img/Logo.png" alt="尚品汇">
                    </a>
                </h1>
                <div class="searchArea">
                    <form action="###">
                        <input type="text" class="inputSearch">
                        <button class="submit">搜索</button>
                    </form>
                </div>
            </div>
        </header>
        <!--商品导航分类-->
        <div class="typeNav">
            <div class="container">
                <h2>全部商品分类</h2>
                <nav>
                    <a href="###">服装城</a>
                    <a href="###">美妆馆</a>
                    <a href="###">尚品惠超市</a>
                    <a href="###">全球购</a>
                    <a href="###">闪购</a>
                    <a href="###">团购</a>
                    <a href="###">有趣</a>
                    <a href="###">秒杀</a>
                </nav>
            </div>
        </div>
        <!--主要内容区域-->
        <section class="con">
            <!--路径导航-->
            <div class="conPoin">
                <!-- <a href="###">手机、数码、通讯</a>
                <i>/</i>
                <a href="###">手机</a>
                <i>/</i>
                <a href="###">Apple手机</a>
                <i>/</i>
                <a>iphone 6S系类</a> -->
            </div>
            <!--内容区-->
            <div class="mainCon">
                <!--左侧放大镜区域-->
                <div class="previewWrap">
                    <!--放大镜效果区域-->
                    <div class="preview">
                        <div class="zoom">
                            <!--小图-->
                            <img src="img/s1.png" alt="">
                            <!--蒙版-->
                        </div>
                        <!--大图-->
                    </div>
                    <!--缩略图区域-->
                    <div class="specScroll">
                        <a class="prev">&lt;</a>
                        <div class="items">
                            <ul class="list">
                                <!-- <li><img src="img/s1.png" alt=""></li>
                                <li><img src="img/s2.png" alt=""></li>
                                <li><img src="img/s3.png" alt=""></li>
                                <li><img src="img/s1.png" alt=""></li>
                                <li><img src="img/s2.png" alt=""></li>
                                <li><img src="img/s3.png" alt=""></li>
                                <li><img src="img/s1.png" alt=""></li>
                                <li><img src="img/s2.png" alt=""></li> -->
                            </ul>
                        </div>
                        <a class="next">&gt;</a>
                    </div>
                </div>
                <!-- 商品内容区域右侧部分 -->
                <div class="infoWrap">
                    <div class="info1">
                        <!-- <h3 class="infoName">Apple iPhone 6s（A1700）64G玫瑰金色 移动通信电信4G手机</h3>
                        <p class="news">推荐选择下方[移动优惠购],手机套餐齐搞定,不用换号,每月还有花费返</p>
                        <div class="priceArea">
                            <div class="priceArea1">
                                <div class="title">价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</div>
                                <div class="price">
                                    <i>¥</i>
                                    <em>5299</em>
                                    <span>降价通知</span>
                                </div>
                                <div class="remark">
                                    <i>累计评价</i>
                                    <span>3283</span>
                                </div>
                            </div>
                            <div class="priceArea2">
                                <div class="title">促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</div>
                                <div class="fixWidth">
                                    <i>加价购</i>
                                    <em>满999.00另加20.00元，或满1999.00另加30.00元，或满2999.00另加40.00元，即可在购物车换购热销商品</em>
                                </div>
                            </div>
                        </div>
                        <div class="support">
                            <div class="supportArea">
                                <div class="title">支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</div>
                                <p>以旧换新，闲置手机回收 4G套餐超值抢 礼品购</p>
                            </div>
                            <div class="supportArea">
                                <div class="title">配&nbsp;送&nbsp;至</div>
                                <p>广东省 深圳市 宝安区</p>
                            </div>
                        </div> -->
                    </div>
                    <!--筛选区域-->
                    <div class="choose">
                        <!--选择区域-->
                        <div class="chooseArea">
                            <div class="choosed">
                                <!--标记标签-->
                                <!-- <mark>黑色 <a href="###">X</a></mark> -->
                            </div>
                            <!--js当中动态生成-->
                        </div>
                        <!--购物车区域-->
                        <div class="cartWrap">
                            <!--数量选择-->
                            <div class="controls">
                                <input type="text" value="1">
                                <a class="plus">+</a>
                                <a class="minus">-</a>
                            </div>
                            <!--加入购物车-->
                            <div class="add">
                                <a href="###">加入购物车</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- 商品详情 -->
        <section class="product">
            <!-- 侧边栏 -->
            <aside>
                <!-- 选项卡按钮 -->
                <div class="tabWrap">
                    <h4 class="active">相关分类</h4>
                    <h4>推荐品牌</h4>
                </div>
                <div class="tabContent">
                    <div class="tabItem active">
                        <ul class="partList">
                            <li>手机</li>
                            <li>手机壳</li>
                            <li>内存卡</li>
                            <li>iphone配件</li>
                            <li>贴膜</li>
                            <li>手机耳机</li>
                            <li>移动电源</li>
                            <li>平板电脑</li>
                        </ul>
                        <ul class="goodsList">
                            <li>
                                <div class="gImg">
                                    <img src="img/part01.png" alt="">
                                </div>
                                <div class="attr">Apple苹果iPhone 6s (A1699)</div>
                                <div class="price">¥6088.00</div>
                                <a href="###">加入购物车</a>
                            </li>
                            <li>
                                <div class="gImg">
                                    <img src="img/part02.png" alt="">
                                </div>
                                <div class="attr">Apple苹果iPhone 6s (A1699)</div>
                                <div class="price">¥6088.00</div>
                                <a href="###">加入购物车</a>
                            </li>
                            <li>
                                <div class="gImg">
                                    <img src="img/part03.png" alt="">
                                </div>
                                <div class="attr">Apple苹果iPhone 6s (A1699)</div>
                                <div class="price">¥6088.00</div>
                                <a href="###">加入购物车</a>
                            </li>
                            <li>
                                <div class="gImg">
                                    <img src="img/part01.png" alt="">
                                </div>
                                <div class="attr">Apple苹果iPhone 6s (A1699)</div>
                                <div class="price">¥6088.00</div>
                                <a href="###">加入购物车</a>
                            </li>
                        </ul>
                    </div>
                    <div class="tabItem">
                        推荐品牌
                    </div>
                </div>
            </aside>
            <!--右侧区域-->
            <div class="detail">
                <!--选择搭配-->
                <div class="fitting">
                    <h4>选择搭配</h4>
                    <div class="goodSutis">
                        <div class="master">
                            <img src="img/l-m01.png" alt="">
                            <p>¥5299</p>
                            <i>+</i>
                        </div>
                        <ul class="suits">
                            <li class="suitsItem">
                                <img src="img/dp01.png" alt="">
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value='100'>
                                    <span>100</span>
                                </label>
                            </li>
                            <li class="suitsItem">
                                <img src="img/dp02.png" alt="">
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value='200'>
                                    <span>200</span>
                                </label>
                            </li>
                            <li class="suitsItem">
                                <img src="img/dp03.png" alt="">
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value='300'>
                                    <span>300</span>
                                </label>
                            </li>
                            <li class="suitsItem">
                                <img src="img/dp04.png" alt="">
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value='400'>
                                    <span>400</span>
                                </label>
                            </li>
                        </ul>
                        <div class="result">
                            <div class="num">已选购0件商品</div>
                            <p class="priceTit">套餐价</p>
                            <p class="price">¥5299</p>
                            <button class="addShopCar">加入购物车</button>
                        </div>
                    </div>
                </div>
                <!--评论区域-->
                <div class="intro">
                    <ul class="tabWrap">
                        <li class="active">
                            <a href="###">商品介绍</a>
                        </li>
                        <li>
                            <a href="###">规格与包装</a>
                        </li>
                        <li>
                            <a href="###">售后保障</a>
                        </li>
                        <li>
                            <a href="###">商品评价</a>
                        </li>
                        <li>
                            <a href="###">手机社区</a>
                        </li>
                    </ul>
                    <div class="tabContent">
                        <div class="tabItem active">
                            <ul>
                                <li>分辨率：1920*1080(FHD)</li>
                                <li>后置摄像头：1200万像素</li>
                                <li>前置摄像头：500万像素</li>
                                <li>核 数：其他</li>
                                <li>频 率：以官网信息为准</li>
                                <li>品牌： Apple</li>
                                <li>商品名称：APPLEiPhone 6s Plus</li>
                                <li>商品编号：1861098</li>
                                <li>商品产地：中国大陆</li>
                                <li>商品毛重：0.51kg</li>
                                <li>热点：指纹识别，Apple Pay，金属机身，拍照神器</li>
                                <li>系统：苹果（IOS）</li>
                                <li>像素：1000-1600万品毛重：0.51kg</li>
                                <li>机身内存：64GB</li>
                            </ul>
                            <img src="img/intro01.png" alt="">
                            <img src="img/intro02.png" alt="">
                            <img src="img/intro03.png" alt="">
                        </div>
                        <div class="tabItem">规格与包装</div>
                        <div class="tabItem">售后保障</div>
                        <div class="tabItem">商品评价</div>
                        <div class="tabItem">手机社区</div>
                    </div>
                </div>
            </div>
        </section>
        <div class="footbox">
            <div class="box1">
                <h4 class="kt">猜你喜欢</h4>
            </div>
            <ul class="list-like">
                <li>
                    <div class="p-img"><img src="img/itemlike01.png" alt=""></div>
                    <div class="attr"><em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em></div>
                    <div class="price">
                        <i>¥</i>
                        <em>3699.00</em>
                    </div>
                    <div class="commit">已有6人评价</div>
                </li>
                <li>
                    <div class="p-img"><img src="img/itemlike02.png" alt=""></div>
                    <div class="attr"><em>Apple苹果iPhone 6s/6s Plus 16G 64G 128G</em></div>
                    <div class="price">
                        <i>¥</i>
                        <em>4388.00</em>
                    </div>
                    <div class="commit">已有700人评价</div>
                </li>
                <li>
                    <div class="p-img"><img src="img/itemlike03.png" alt=""></div>
                    <div class="attr"><em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em></div>
                    <div class="price">
                        <i>¥</i>
                        <em>4088.00</em>
                    </div>
                    <div class="commit">已有6人评价</div>
                </li>
                <li>
                    <div class="p-img"><img src="img/itemlike04.png" alt=""></div>
                    <div class="attr"><em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em></div>
                    <div class="price">
                        <i>¥</i>
                        <em>3699.00</em>
                    </div>
                    <div class="commit">已有6人评价</div>
                </li>
                <li>
                    <div class="p-img"><img src="img/itemlike05.png" alt=""></div>
                    <div class="attr"><em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em></div>
                    <div class="price">
                        <i>¥</i>
                        <em>3699.00</em>
                    </div>
                    <div class="commit">已有6人评价</div>
                </li>
                <li>
                    <div class="p-img"><img src="img/itemlike06.png" alt=""></div>
                    <div class="attr"><em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em></div>
                    <div class="price">
                        <i>¥</i>
                        <em>3699.00</em>
                    </div>
                    <div class="commit">已有6人评价</div>
                </li>
            </ul>
        </div>
        <div class="footer">
            <div class="footer-container">
                <div class="footerItem">
                    <h4>购物指南</h4>
                    <ul class="footerItemCon">
                        <li>购物流程</li>
                        <li>会员介绍</li>
                        <li>生活旅行/团购</li>
                        <li>常见问题</li>
                        <li>购物指南</li>
                    </ul>
                </div>
                <div class="footerItem">
                    <h4>购物指南</h4>
                    <ul class="footerItemCon">
                        <li>购物流程</li>
                        <li>会员介绍</li>
                        <li>生活旅行/团购</li>
                        <li>常见问题</li>
                        <li>购物指南</li>
                    </ul>
                </div>
                <div class="footerItem">
                    <h4>购物指南</h4>
                    <ul class="footerItemCon">
                        <li>购物流程</li>
                        <li>会员介绍</li>
                        <li>生活旅行/团购</li>
                        <li>常见问题</li>
                        <li>购物指南</li>
                    </ul>
                </div>
                <div class="footerItem">
                    <h4>购物指南</h4>
                    <ul class="footerItemCon">
                        <li>购物流程</li>
                        <li>会员介绍</li>
                        <li>生活旅行/团购</li>
                        <li>常见问题</li>
                        <li>购物指南</li>
                    </ul>
                </div>
                <div class="footerItem">
                    <h4>购物指南</h4>
                    <ul class="footerItemCon">
                        <li>购物流程</li>
                        <li>会员介绍</li>
                        <li>生活旅行/团购</li>
                        <li>常见问题</li>
                        <li>购物指南</li>
                    </ul>
                </div>
                <div class="footerItem">
                    <h4>购物指南</h4>
                    <ul class="footerItemCon">
                        <li><img src="img/wx_cz.jpg" alt=""></li>
                    </ul>
                </div>

            </div>
            <div class="copyright">
                <ul class="helpLink">
                    <li>关于我们</li>
                    <li>联系我们</li>
                    <li>关于我们</li>
                    <li>商家入驻 </li>
                    <li>联系我们</li>
                    <li>商家入驻</li>
                    <li>关于我们</li>
                    <li>联系我们</li>
                    <li>商家入驻</li>
                    <li>联系我们</li>
                </ul>
                <p>地址：北京市昌平区宏福科技园综合楼6层</p>
                <p>京ICP备19006430号</p>
            </div>

        </div>
    </div>
    <script type="text/javascript" src="js/data.js"></script>
    <script type="text/javascript">
        window.onload = function () {
            //放大镜大图索引
            var magnifierId = 0;
            //          定义商品默认数量
            var changeNum = 1;
            //    放大镜效果
            magnifier();
            function magnifier() {
                //    模拟后台数据
                var imgsrc = goodData.imgsrc;
                //  获取小图容器
                var zoomNode = document.querySelector('.wrap .con .mainCon .previewWrap .preview .zoom');
                //   获取放大镜外层容器
                var previewNode = document.querySelector('.wrap .con .mainCon .previewWrap .preview')
                //  初始化蒙版
                var maskNode = null;
                //   初始化大图容器
                var bigImgBoxNode = null;
                //   初始化大图
                var bigImgNode = null;

                //  绑定鼠标移入移出事件
                previewNode.onmouseenter = function () {

                    if (!maskNode) {
                        maskNode = document.createElement('div');
                        maskNode.className = 'mask';
                        zoomNode.appendChild(maskNode);
                        bigImgBoxNode = document.createElement('div');
                        bigImgBoxNode.className = 'bigImgBox';
                        //   创建大图
                        bigImgNode = new Image();
                        bigImgNode.src = imgsrc[magnifierId].b;
                        bigImgBoxNode.appendChild(bigImgNode);
                        previewNode.appendChild(bigImgBoxNode);
                    }
                    zoomNode.onmousemove = function (event) {
                        //  移动的逻辑
                        var maskPosition = {
                            left: event.clientX - maskNode.offsetWidth / 2 - zoomNode.getBoundingClientRect().left,
                            top: event.clientY - maskNode.offsetHeight / 2 - zoomNode.getBoundingClientRect().top
                        }
                        if (maskPosition.left <= 0) {
                            maskPosition.left = 0;
                        } else if (maskPosition.left >= zoomNode.clientWidth - maskNode.offsetWidth) {
                            maskPosition.left = zoomNode.clientWidth - maskNode.offsetWidth;
                        }
                        if (maskPosition.top <= 0) {
                            maskPosition.top = 0;
                        } else if (maskPosition.top >= zoomNode.clientHeight - maskNode.offsetHeight) {
                            maskPosition.top = zoomNode.clientHeight - maskNode.offsetHeight;
                        }
                        maskNode.style.left = maskPosition.left + 'px';
                        maskNode.style.top = maskPosition.top + 'px';
                        //放大镜移动
                        var scale = (zoomNode.clientWidth - maskNode.offsetWidth) / (bigImgNode.offsetWidth - bigImgBoxNode.offsetWidth);
                        //计算放大镜位移
                        var bigImgPosition = {
                            left: maskPosition.left / scale,
                            top: maskPosition.top / scale
                        }
                        bigImgNode.style.marginLeft = -bigImgPosition.left + 'px'
                        bigImgNode.style.marginTop = -bigImgPosition.top + 'px'

                    };
                    previewNode.onmouseleave = function () {
                        // 删除大图容器 和蒙版
                        zoomNode.removeChild(maskNode);
                        previewNode.removeChild(bigImgBoxNode);
                        //  把蒙版元素的变量初始化
                        maskNode = null;
                        bigImgBoxNode = null;
                        bigImgNode = null;
                        //   事件解绑
                        zoomNode.onmousemove = null;
                        previewNode.onmouseleave = null;
                    }
                }
            }
            function getStyle(obj, attr) {
                if (obj.currentStyle) {
                    return obj.currentStyle(attr);
                } else {
                    return window.getComputedStyle(obj)[attr];
                }
            }
            //缩略图滑动效果
            thumbnail();
            function thumbnail() {
                //获取图片容器
                var listNode = document.querySelector('.wrap .con .mainCon .specScroll .items .list');
                //模拟后台数据
                var imgsrc = goodData.imgsrc;
                imgsrc.forEach(function (item) {
                    //创建li
                    var liNode = document.createElement('li');
                    var imgNode = new Image();
                    // 给图片设置对应的src属性
                    imgNode.src = item.s
                    liNode.appendChild(imgNode);
                    listNode.appendChild(liNode);
                });
                //获取左右按钮节点
                var prevNode = document.querySelector('.wrap .con .mainCon .specScroll .prev');
                var nextNode = document.querySelector('.wrap .con .mainCon .specScroll .next');

                // //获取li
                var liNodes = document.querySelectorAll('.wrap .con .mainCon .specScroll .items .list>li');
                // // 定义每次滑动的数量
                var moveNum = 2;
                // //定义容器中默认显示的数量
                var viewNum = 5;
                // //总移动长度
                var countLength = (liNodes.length - viewNum) * (liNodes[0].offsetWidth + parseInt(getStyle(liNodes[0], 'marginRight')));
                // //每次移动的长度
                var moveLength = (liNodes[0].offsetWidth + parseInt(getStyle(liNodes[0], 'marginRight'))) * moveNum;
                // //初始化已经移动的距离
                var tempLenght = 0;
                //按钮下一页逻辑
                nextNode.onclick = function () {
                    if (tempLenght < countLength) {
                        if (countLength - tempLenght > moveLength) {
                            tempLenght = tempLenght + moveLength
                            listNode.style.left = -tempLenght + 'px'
                        } else {
                            tempLenght += (countLength - tempLenght);
                            listNode.style.left = -tempLenght + 'px'
                        }
                    }
                };
                //按钮上一页逻辑
                prevNode.onclick = function () {
                    if (tempLenght > 0) {
                        if (tempLenght > moveLength) {
                            tempLenght = tempLenght - moveLength;
                            listNode.style.left = -tempLenght + "px";
                        } else {
                            listNode.style.left = 0 + "px"
                        }
                    }
                }
            }
            // 缩略图点击效果
            thumbnailClick()
            function thumbnailClick() {
                //获取容器中的图片
                var scrollItems = document.querySelectorAll('.wrap .con .mainCon .specScroll .items .list li>img');
                //获取小图
                var zoomImgNode = document.querySelector('.wrap .con .mainCon .previewWrap .preview .zoom>img');
                //给图片设置单击事件
                for (var i = 0; i < scrollItems.length; i++) {
                    // scrollItems[i].index = i;
                    scrollItems[i].onclick = function () {
                        for (var j = 0; j < scrollItems.length; j++) {
                            if (scrollItems[j] == this) {
                                //          当点击是  我能够获得缩略图的索引  通过这个索引可以去数据当中照当对应的大图路径
                                magnifierId = j;
                            }
                        }
                        //修改小图
                        zoomImgNode.src = this.src;
                    }
                }
            }
            //商品内容筛选 动态生成
            screening()
            function screening() {
                //模拟数据
                var crumbData = goodData.goodsDetail.crumbData;
                //          获取容器元素
                var chooseAreaNode = document.querySelector('.wrap .con .mainCon .choose .chooseArea')
                crumbData.forEach(function (item) {
                    var dlNode = document.createElement('dl');
                    var dtNode = document.createElement('dt');
                    dtNode.innerHTML = item.title
                    dlNode.appendChild(dtNode);
                    item.data.forEach(function (item) {
                        //             生成dd
                        var ddNode = document.createElement('dd');
                        //          给dd插入内容
                        ddNode.innerHTML = item.type;
                        //给生成的dd添加自定义属性 保存对价格的修改
                        ddNode.setAttribute('changePrice', item.changePrice);
                        //         把dd插入到dl中
                        dlNode.appendChild(ddNode);
                    });
                    chooseAreaNode.appendChild(dlNode);
                })
                //以下是点击筛选内容交互
                var dlList = chooseAreaNode.getElementsByTagName('dl');
                var arr = new Array(crumbData.length);
                //填充数组   用传入的值填充整个数组
                arr.fill(0);
                //            var arr = [];
                //            for (var i = 0; i < crumbData.length; i++) {
                //                arr.push(0);
                //            }
                for (var i = 0; i < dlList.length; i++) {
                    //  给每一个dl添加索引
                    dlList[i].index = i;
                    (function () {
                        var ddList = dlList[i].getElementsByTagName('dd');
                        //                对所有的dd绑定单击事件
                        for (var j = 0; j < ddList.length; j++) {
                            ddList[j].onclick = function () {
                                //dd高亮切换
                                //先恢复所有dd的默认颜色
                                for (var i = 0; i < ddList.length; i++) {
                                    ddList[i].style.color = '#666';
                                }
                                this.style.color = 'red';
                                //  用户点击了dd 根据当前的dd找到对应的dl获取索引 然后修改数组内容
                                arr[this.parentNode.index] = this;
                                priceSum(arr);
                                console.log(arr)
                                var choosedNode = document.querySelector('.wrap .con .mainCon .choose .chooseArea .choosed')
                                //每次创建元素之前先把 结果容器清空
                                choosedNode.innerHTML = '';
                                arr.forEach(function (item, index) {
                                    // 检测数组，当当前元素不为0的时候 创建mark标签
                                    if (item) {
                                        //创建mark标签
                                        var markNode = document.createElement('mark');
                                        markNode.innerHTML = item.innerHTML;
                                        // 创建mark标签中的a标签
                                        var aNode = document.createElement('a');
                                        aNode.setAttribute('num', index)
                                        aNode.innerHTML = 'X';
                                        //把A标签放入到mark中
                                        markNode.appendChild(aNode);
                                        choosedNode.appendChild(markNode);
                                    }
                                })
                                //获取mark标签中所有的a标签
                                var aList = choosedNode.querySelectorAll('mark>a');
                                for (var i = 0; i < aList.length; i++) {
                                    aList[i].onclick = function () {
                                        //  获取当前点击的a标签的索引   去操作对应的dl元素当中dd高亮
                                        var num = parseInt(this.getAttribute('num'));//返回的结果是一个字符串
                                        //  删除掉当前点击的mark标签
                                        this.parentNode.parentNode.removeChild(this.parentNode);
                                        var ddList = dlList[num].querySelectorAll('dd');
                                        for (var i = 0; i < ddList.length; i++) {
                                            ddList[i].style.color = '#666'
                                        }
                                        //  把默认的颜色给上去
                                        ddList[0].style.color = 'red';
                                        //   每一次删除一个内容的时候 要把当前数组当中对应的元素清空
                                        arr[num] = 0;
                                        priceSum(arr)
                                    }
                                }

                            }
                        }
                    })();

                }
                //计算价钱
                function priceSum(arr) {
                    var newPrice = goodData.goodsDetail.price;
                    arr.forEach(function (item) {
                        if (item) {
                            newPrice += parseInt(item.getAttribute('changePrice'));
                        }
                    });

                    var priceNode = document.querySelector('.wrap .con .mainCon .infoWrap .priceArea .priceArea1 .price em');
                    priceNode.innerHTML = newPrice;
                    //               只要计算价钱 就改变选择搭配的价钱
                    var choosePriceNode = document.querySelector('.wrap .product .detail .fitting .goodSutis .master p')
                    choosePriceNode.innerHTML = '¥' + (newPrice * changeNum);
                    //              计算搭配完成的总价
                    //            获取搭配后的总价元素
                    var chooseAllPrice = document.querySelector('.wrap .product .detail .fitting .goodSutis .result .price')
                    //          获取搭配区域所有的复选框
                    var chooseAllCheckBox = document.querySelectorAll('.wrap .product .detail .fitting .goodSutis .suits .suitsItem input')
                    chooseAllCheckBox.forEach(function (item) {
                        if (item.checked) {
                            newPrice += parseInt(item.value);
                        }
                        chooseAllPrice.innerHTML = '¥' + (newPrice * changeNum);
                    })
                }

            }

            //选择搭配价钱
            fittingPrice()
            function fittingPrice() {
                var chooseAllPrice = document.querySelector('.wrap .product .detail .fitting .goodSutis .result .price')
                var chooseAllCheckBox = document.querySelectorAll('.wrap .product .detail .fitting .goodSutis .suits .suitsItem input')
                for (var i = 0; i < chooseAllCheckBox.length; i++) {
                    chooseAllCheckBox[i].onclick = function () {
                        // 获取原价元素
                        var choosePriceNode = document.querySelector('.wrap .product .detail .fitting .goodSutis .master p')
                        //获取原价 
                        var choosePrice = parseInt(choosePriceNode.innerHTML.substr(1));
                        chooseAllCheckBox.forEach(function (item) {
                            if (item.checked) {
                                choosePrice += parseInt(item.value)
                            }
                        })
                        chooseAllPrice.innerHTML = '¥' + choosePrice;
                    }

                }
            }
            //        商品数量交互
            goodsNum();
            function goodsNum() {
                var inputNode = document.querySelector('.wrap .con .mainCon .choose .cartWrap .controls input');
                var plusNode = document.querySelector('.wrap .con .mainCon .choose .cartWrap .controls .plus');
                var minusNode = document.querySelector('.wrap .con .mainCon .choose .cartWrap .controls .minus');

                plusNode.onclick = function () {
                    changeNum++;
                    inputNode.value = changeNum;
                    changeFittingPrice()
                };
                minusNode.onclick = function () {
                    //               商品数量最小值为1
                    if (changeNum > 1) {
                        changeNum--;
                        inputNode.value = changeNum;
                        changeFittingPrice()
                    }
                }
                //           封装一个 改变数量就改变搭配总价的函数
                function changeFittingPrice() {
                    var priceNode = document.querySelector('.wrap .con .mainCon .infoWrap .priceArea .priceArea1 .price em')
                    //              需要修改的价格就是  单价*数量
                    var finalPrice = priceNode.innerHTML * changeNum;
                    console.log(finalPrice);

                    //改变选择搭配价钱
                    var choosePrice = document.querySelector('.wrap .product .detail .fitting .goodSutis .master p')
                    choosePrice.innerHTML = '¥' + finalPrice;

                    // 修改搭配后的价钱
                    // 获取搭配后的总价元素
                    var chooseAllPrice = document.querySelector('.wrap .product .detail .fitting .goodSutis .result .price')
                    //获取搭配区域所有的复选框
                    var chooseAllCheckBox = document.querySelectorAll('.wrap .product .detail .fitting .goodSutis .suits .suitsItem input')
                    chooseAllCheckBox.forEach(function (item) {
                        if (item.checked) {
                            finalPrice += parseInt(item.value);
                        }
                        chooseAllPrice.innerHTML = '¥' + finalPrice;
                    })
                }
            }



            //  路径导航动态生成
            pathUrl();
            function pathUrl() {
                //         获取容器
                var conPoinNode = document.querySelector('.wrap .con .conPoin');
                //         获取数据
                var path = goodData.path;
                //            遍历路径的数据
                path.forEach(function (item, index) {
                    //               遍历的时候创建a标签
                    var aNode = document.createElement('a');
                    //                先判断数据有没有url属性
                    if (index == path.length - 1) {
                        //                 最后一个a标签  没有href属性  也不需要创建i标签
                        aNode.innerHTML = item.title;
                        conPoinNode.appendChild(aNode);
                    } else {
                        aNode.href = item.url;
                        aNode.innerHTML = item.title;
                        conPoinNode.appendChild(aNode);
                        var iNode = document.createElement('i');
                        iNode.innerHTML = '/';
                        conPoinNode.appendChild(iNode);
                    }
                })
            }
            // 商品详情的数据动态生成
            goodsDetail();
            function goodsDetail() {
                //       获取容器
                var info1Node = document.querySelector('.wrap .con .mainCon .infoWrap .info1');
                //       获取数据
                var infoData = goodData.goodsDetail;
                var num = 1;
                //  var str = 'haha'+num+'hehe'
                // ${变量}   就可以再字符串当中正常解析
                //字符串拼接
                var info1Content = `<h3 class="infoName">${infoData.title}</h3>
                    <p class="news">${infoData.recommend}</p>
                    <div class="priceArea">
                        <div class="priceArea1">
                            <div class="title">价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</div>
                            <div class="price">
                                <i>¥</i>
                                <em>${infoData.price}</em>
                                <span>降价通知</span>
                            </div>
                            <div class="remark">
                                <i>累计评价</i>
                                <span>3283</span>
                            </div>
                        </div>
                        <div class="priceArea2">
                            <div class="title">促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</div>
                            <div class="fixWidth">
                                <i>${infoData.promoteSales.type}</i>
                                <em>${infoData.promoteSales.content}</em>
                            </div>
                        </div>
                    </div>
                    <div class="support">
                        <div class="supportArea">
                            <div class="title">支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</div>
                            <p>${infoData.support}</p>
                        </div>
                        <div class="supportArea">
                            <div class="title">配&nbsp;送&nbsp;至</div>
                            <p>${infoData.address}</p>
                        </div>
                    </div>`;
                info1Node.innerHTML = info1Content;
            }
            //      选项卡封装
            function Tab(btns, content) {
                this.tabBtn = btns;
                this.content = content;
                //          保存当前的this，用于内部事件的回调函数访问外部的this
                var _this = this;

                //           给所有的btn绑定单击事件
                for (var i = 0; i < this.tabBtn.length; i++) {
                    //               需要给所有的按钮添加索引
                    this.tabBtn[i].index = i;
                    this.tabBtn[i].onclick = function () {
                        //                    this  事件源
                        _this.clickBtn(this)
                        console.log(_this);

                    }
                }
            }
            Tab.prototype.clickBtn = function (btn) {
                //            btn接受的就是当前点击的事件源
                //          选项卡切换
                for (var i = 0; i < this.tabBtn.length; i++) {
                    this.tabBtn[i].className = '';
                    this.content[i].style.display = 'none';
                }
                btn.className = 'active';
                this.content[btn.index].style.display = 'block';
            }
            //      侧边栏调用tab切换
            asideNav();
            function asideNav() {
                var tabNodes = document.querySelectorAll('.wrap .product > aside .tabWrap>h4');
                var contentNodes = document.querySelectorAll('.wrap .product > aside .tabContent .tabItem');
                new Tab(tabNodes, contentNodes);
            }
            //      评论区域tab切换
            intro();
            function intro() {
                var tabNodes = document.querySelectorAll('.wrap .product .detail .intro .tabWrap li');
                var contentNodes = document.querySelectorAll('.wrap .product .detail .intro .tabContent .tabItem')
                new Tab(tabNodes, contentNodes);
            }
            //侧边栏的效果
            asideShow()
            function asideShow() {
                var butNode = document.querySelector('.wrap .toolBar .but');
                var toolBarNode = document.querySelector('.wrap .toolBar');
                var flag = true;
                butNode.onclick = function () {
                    if (flag) {
                        toolBarNode.className = 'toolBar toolBarOut';
                        this.className = 'but open'
                    } else {
                        toolBarNode.className = 'toolBar toolBarWrap';
                        this.className = 'but list'
                    }
                    flag = !flag;
                }
                var pullList = document.querySelectorAll('.wrap .toolBar .pull');
                var tabIconList = document.querySelectorAll('.wrap .toolBar .pull .tabIcon');
                var tabTxtList = document.querySelectorAll('.wrap .toolBar .pull em');
                for (var i = 0; i < pullList.length; i++) {
                    pullList[i].index = i;
                    pullList[i].onmouseenter = function () {
                        tabTxtList[this.index].style.left = '-59px';
                        tabTxtList[this.index].style.backgroundColor = '#e1251b';
                        tabIconList[this.index].style.backgroundColor = '#e1251b';

                    }
                    pullList[i].onmouseleave = function () {
                        tabTxtList[this.index].style.left = '35px';
                        tabTxtList[this.index].style.backgroundColor = '#7a6e6e';
                        tabIconList[this.index].style.backgroundColor = '#7a6e6e';

                    }
                }

            }

        }
    </script>
</body>

</html>